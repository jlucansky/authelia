(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{119:function(e,t,n){e.exports={wiggle:"PushNotificationIcon_wiggle__kPe3e"}},135:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var r=n(1);function c(e){var t=document.body.getAttribute("data-".concat(e));if(null===t)throw new Error("No ".concat(e," embedded variable detected"));return t}function a(){return c("basepath")}n.p="/",""!==a()&&(n.p=a()+"/");var i=n(0),s=n(15),o=n.n(s),u=(n(135),n(8)),l=n(43),d=n(241),b=n(242),p=n(76),j=n(9),h=n(247),f=5,O=Object(i.createContext)({notification:null,setNotification:function(){}}),x=O;function g(){var e=Object(i.useContext)(O),t=function(t){return function(n,r){e.setNotification({level:t,message:n,timeout:r||f})}},n=Object(i.useCallback)(t("info"),[]),r=Object(i.useCallback)(t("success"),[]),c=Object(i.useCallback)(t("warning"),[]),a=Object(i.useCallback)(t("error"),[]),s=null!==e.notification;return{notification:e.notification,resetNotification:function(){return e.setNotification(null)},createInfoNotification:n,createSuccessNotification:r,createWarnNotification:c,createErrorNotification:a,isActive:s}}var m=n(31),v=n(3),w=n(217),k=n(218),y=n(72),C=n(219),S=n(111),T=n.n(S),N=n(114),E=n.n(N),I=n(115),R=n.n(I),A=n(113),F=n.n(A),_=n(20),P=n.n(_),L={success:T.a,warning:F.a,error:E.a,info:R.a},M=function(e){var t=B(),n=L[e.level],c=e.className,a=(e.variant,e.message),i=Object(v.a)(e,["className","variant","message"]);return Object(r.jsx)(w.a,Object(m.a)({className:P()(t[e.level],c),message:Object(r.jsxs)("span",{className:t.message,children:[Object(r.jsx)(n,{className:P()(t.icon,t.iconVariant)}),a]})},i))},B=Object(k.a)((function(e){return{success:{backgroundColor:y.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:C.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),z=function(e){var t=Object(i.useState)(null),n=Object(u.a)(t,2),c=n[0],a=n[1],s=g().notification;Object(i.useEffect)((function(){s&&null!==s&&a(s)}),[s,a]);var o=void 0!==s&&null!==s;return Object(r.jsx)(h.a,{open:o,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:c?1e3*c.timeout:1e4,onClose:e.onClose,onExited:function(){return a(null)},children:Object(r.jsx)(M,{className:"notification",level:c?c.level:"info",message:c?c.message:""})})},D="/",U="/authenticated",W="/2fa",H="/2fa/security-key",q="/2fa/one-time-password",K="/2fa/push-notification",G="/reset-password/step1",Y="/logout",$=n(121),V=Object($.a)({custom:{icon:"#000",loadingBar:"#000"},palette:{primary:{main:"#1976d2"},background:{default:"#fff",paper:"#fff"}}}),J=Object($.a)({custom:{icon:"#fff",loadingBar:"#fff"},palette:{type:"dark",primary:{main:"#1976d2"}}}),X=Object($.a)({custom:{icon:"#929aa5",loadingBar:"#929aa5"},palette:{primary:{main:"#929aa5"},background:{default:"#2f343e",paper:"#2f343e"}},overrides:{MuiCssBaseline:{"@global":{body:{backgroundColor:"#2f343e",color:"#929aa5"}}},MuiOutlinedInput:{root:{"& $notchedOutline":{borderColor:"#929aa5"},"&:hover:not($disabled):not($focused):not($error) $notchedOutline":{borderColor:"#929aa5",borderWidth:2},"&$focused $notchedOutline":{borderColor:"#929aa5"}},notchedOutline:{}},MuiCheckbox:{root:{color:"#929aa5"}},MuiInputBase:{input:{color:"#929aa5"}},MuiInputLabel:{root:{color:"#929aa5"}}}}),Q=n(6),Z=n.n(Q),ee=n(10),te=n(51),ne=n(35),re=n(224),ce=n(52),ae=n(221),ie=n(225),se=n(243),oe=n(228),ue=n(71),le=n(116),de=n.n(le),be=n.p+"static/media/applestore-badge.15f01eef.svg",pe=n.p+"static/media/googleplay-badge.6577102c.svg",je=function(e){var t=e.targetBlank?"_blank":void 0,n=e.iconSize;return Object(r.jsxs)("div",{className:e.className,children:[Object(r.jsx)(ae.a,{href:e.googlePlayLink,target:t,children:Object(r.jsx)("img",{src:pe,alt:"google play",style:{width:n}})}),Object(r.jsx)(ae.a,{href:e.appleStoreLink,target:t,children:Object(r.jsx)("img",{src:be,alt:"apple store",style:{width:n}})})]})},he="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en_us",fe="https://apps.apple.com/us/app/google-authenticator/id388497605",Oe=n(222),xe=n(223),ge=n(70);function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ve(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var we=i.createElement("path",{d:"M55,27.5C55,12.337,42.663,0,27.5,0S0,12.337,0,27.5c0,8.009,3.444,15.228,8.926,20.258l-0.026,0.023l0.892,0.752 c0.058,0.049,0.121,0.089,0.179,0.137c0.474,0.393,0.965,0.766,1.465,1.127c0.162,0.117,0.324,0.234,0.489,0.348 c0.534,0.368,1.082,0.717,1.642,1.048c0.122,0.072,0.245,0.142,0.368,0.212c0.613,0.349,1.239,0.678,1.88,0.98 c0.047,0.022,0.095,0.042,0.142,0.064c2.089,0.971,4.319,1.684,6.651,2.105c0.061,0.011,0.122,0.022,0.184,0.033 c0.724,0.125,1.456,0.225,2.197,0.292c0.09,0.008,0.18,0.013,0.271,0.021C25.998,54.961,26.744,55,27.5,55 c0.749,0,1.488-0.039,2.222-0.098c0.093-0.008,0.186-0.013,0.279-0.021c0.735-0.067,1.461-0.164,2.178-0.287 c0.062-0.011,0.125-0.022,0.187-0.034c2.297-0.412,4.495-1.109,6.557-2.055c0.076-0.035,0.153-0.068,0.229-0.104 c0.617-0.29,1.22-0.603,1.811-0.936c0.147-0.083,0.293-0.167,0.439-0.253c0.538-0.317,1.067-0.648,1.581-1 c0.185-0.126,0.366-0.259,0.549-0.391c0.439-0.316,0.87-0.642,1.289-0.983c0.093-0.075,0.193-0.14,0.284-0.217l0.915-0.764 l-0.027-0.023C51.523,42.802,55,35.55,55,27.5z M2,27.5C2,13.439,13.439,2,27.5,2S53,13.439,53,27.5 c0,7.577-3.325,14.389-8.589,19.063c-0.294-0.203-0.59-0.385-0.893-0.537l-8.467-4.233c-0.76-0.38-1.232-1.144-1.232-1.993v-2.957 c0.196-0.242,0.403-0.516,0.617-0.817c1.096-1.548,1.975-3.27,2.616-5.123c1.267-0.602,2.085-1.864,2.085-3.289v-3.545 c0-0.867-0.318-1.708-0.887-2.369v-4.667c0.052-0.52,0.236-3.448-1.883-5.864C34.524,9.065,31.541,8,27.5,8 s-7.024,1.065-8.867,3.168c-2.119,2.416-1.935,5.346-1.883,5.864v4.667c-0.568,0.661-0.887,1.502-0.887,2.369v3.545 c0,1.101,0.494,2.128,1.34,2.821c0.81,3.173,2.477,5.575,3.093,6.389v2.894c0,0.816-0.445,1.566-1.162,1.958l-7.907,4.313 c-0.252,0.137-0.502,0.297-0.752,0.476C5.276,41.792,2,35.022,2,27.5z"});function ke(e,t){var n=e.title,r=e.titleId,c=ve(e,["title","titleId"]);return i.createElement("svg",me({id:"UserSvg",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 55 55",style:{enableBackground:"new 0 0 55 55"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},c),n?i.createElement("title",{id:r},n):null,we)}var ye=i.forwardRef(ke),Ce=(n.p,function(e){var t=Se();return Object(r.jsx)(Oe.a,{id:e.id,className:t.root,container:!0,spacing:0,alignItems:"center",justify:"center",children:Object(r.jsx)(xe.a,{maxWidth:"xs",className:t.rootContainer,children:Object(r.jsxs)(Oe.a,{container:!0,children:[Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(ye,{className:t.icon})}),e.title?Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(ce.a,{variant:"h5",className:t.title,children:e.title})}):null,Object(r.jsx)(Oe.a,{item:!0,xs:12,className:t.body,children:e.children}),e.showBrand?Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(ae.a,{href:"https://github.com/authelia/authelia",target:"_blank",className:t.poweredBy,children:"Powered by Authelia"})}):null]})})})}),Se=Object(k.a)((function(e){return{root:{minHeight:"90vh",textAlign:"center"},rootContainer:{paddingLeft:32,paddingRight:32},title:{},icon:{margin:e.spacing(),width:"64px",fill:e.custom.icon},body:{marginTop:e.spacing(),paddingTop:e.spacing(),paddingBottom:e.spacing()},poweredBy:{fontSize:"0.7em",color:ge.a[500]}}})),Te=a(),Ne=Te+"/api/oidc/consent",Ee=Te+"/api/firstfactor",Ie=Te+"/api/secondfactor/totp/identity/start",Re=Te+"/api/secondfactor/totp/identity/finish",Ae=Te+"/api/secondfactor/u2f/identity/start",Fe=Te+"/api/secondfactor/u2f/identity/finish",_e=Te+"/api/secondfactor/u2f/register",Pe=Te+"/api/secondfactor/u2f/sign_request",Le=Te+"/api/secondfactor/u2f/sign",Me=Te+"/api/secondfactor/duo",Be=Te+"/api/secondfactor/totp",ze=Te+"/api/reset-password/identity/start",De=Te+"/api/reset-password/identity/finish",Ue=Te+"/api/reset-password",We=Te+"/api/logout",He=Te+"/api/state",qe=Te+"/api/user/info",Ke=Te+"/api/user/info/2fa_method",Ge=Te+"/api/configuration";function Ye(e){if(e.data&&"status"in e.data&&"OK"===e.data.status)return e.data.data}function $e(e){var t=function(e){if(e.data&&"status"in e.data&&"KO"===e.data.status)return e.data}(e);return t&&"KO"===t.status?{errored:!0,message:t.message}:{errored:!1,message:null}}var Ve=n(77),Je=n.n(Ve);function Xe(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(ee.a)(Z.a.mark((function e(t,n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.a.post(t,n);case 2:if(200===(r=e.sent).status&&!$e(r).errored){e.next=5;break}throw new Error("Failed POST to ".concat(t,". Code: ").concat(r.status,". Message: ").concat($e(r).message));case 5:return e.abrupt("return",Ye(r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t){return et.apply(this,arguments)}function et(){return(et=Object(ee.a)(Z.a.mark((function e(t,n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t,n);case 2:if(r=e.sent){e.next=5;break}throw new Error("unexpected type of response");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(ee.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.a.get(t);case 2:if(200===(n=e.sent).status&&!$e(n).errored){e.next=5;break}throw new Error("Failed GET from ".concat(t,". Code: ").concat(n.status,"."));case 5:if(r=Ye(n)){e.next=8;break}throw new Error("unexpected type of response");case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(){return ct.apply(this,arguments)}function ct(){return(ct=Object(ee.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(Ie);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return it.apply(this,arguments)}function it(){return(it=Object(ee.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ze(Re,{token:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(){return ot.apply(this,arguments)}function ot(){return(ot=Object(ee.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(Ae));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(ee.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ze(Fe,{token:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(ee.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(_e,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt=n(47),jt=n.n(pt);function ht(e){var t=jt.a.parse(e);return t&&"token"in t?t.token:null}var ft=function(){var e=Ot(),t=Object(j.g)(),n=Object(j.h)(),c=Object(i.useState)("empty"),a=Object(u.a)(c,2),s=a[0],o=a[1],l=Object(i.useState)(void 0),d=Object(u.a)(l,2),b=d[0],p=d[1],h=g(),f=h.createSuccessNotification,O=h.createErrorNotification,x=Object(i.useState)(!1),m=Object(u.a)(x,2),v=m[0],w=m[1],k=Object(i.useState)(!1),y=Object(u.a)(k,2),C=y[0],S=y[1],T=ht(n.search),N=Object(i.useCallback)(Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:return S(!0),e.prev=3,e.next=6,at(T);case 6:t=e.sent,o(t.otpauth_url),p(t.base32_secret),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),O("Failed to generate the code to register your device",1e4),w(!0);case 16:S(!1);case 17:case"end":return e.stop()}}),e,null,[[3,11]])}))),[T,O]);function E(t,n,c){return Object(r.jsx)(re.a,{className:e.secretButtons,color:"primary",onClick:function(){navigator.clipboard.writeText("".concat(t)),f("".concat(n))},children:Object(r.jsx)(ne.a,{icon:c})})}Object(i.useEffect)((function(){N()}),[N]);var I=C||v?e.fuzzy:void 0;return Object(r.jsx)(Ce,{title:"Scan QR Code",children:Object(r.jsxs)("div",{className:e.root,children:[Object(r.jsxs)("div",{className:e.googleAuthenticator,children:[Object(r.jsx)(ce.a,{className:e.googleAuthenticatorText,children:"Need Google Authenticator?"}),Object(r.jsx)(je,{iconSize:128,targetBlank:!0,className:e.googleAuthenticatorBadges,googlePlayLink:he,appleStoreLink:fe})]}),Object(r.jsx)("div",{className:e.qrcodeContainer,children:Object(r.jsxs)(ae.a,{href:s,children:[Object(r.jsx)(de.a,{value:s,className:P()(I,e.qrcode),size:256}),!v&&C?Object(r.jsx)(ie.a,{className:e.loader,size:128}):null,v?Object(r.jsx)(ne.a,{className:e.failureIcon,icon:te.d}):null]})}),Object(r.jsxs)("div",{children:["empty"!==s?Object(r.jsx)(se.a,{id:"secret-url",label:"Secret",className:e.secret,value:s,InputProps:{readOnly:!0}}):null,b?E(b,"OTP Secret copied to clipboard.",te.c):null,"empty"!==s?E(s,"OTP URL copied to clipboard.",te.a):null]}),Object(r.jsx)(oe.a,{variant:"contained",color:"primary",className:e.doneButton,onClick:function(){t.push(D)},disabled:C,children:"Done"})]})})},Ot=Object(k.a)((function(e){return{root:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},qrcode:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},fuzzy:{filter:"blur(10px)"},secret:{marginTop:e.spacing(1),marginBottom:e.spacing(1),width:"256px"},googleAuthenticator:{},googleAuthenticatorText:{fontSize:.8*e.typography.fontSize},googleAuthenticatorBadges:{},secretButtons:{width:"128px"},doneButton:{width:"256px"},qrcodeContainer:{position:"relative",display:"inline-block"},loader:{position:"absolute",top:"calc(128px - 64px)",left:"calc(128px - 64px)",color:"rgba(255, 255, 255, 0.5)"},failureIcon:{position:"absolute",top:"calc(128px - 64px)",left:"calc(128px - 64px)",color:ue.a[400],fontSize:"128px"}}})),xt=n(48),gt=n.n(xt),mt=n(57),vt=n.n(mt),wt=function(e){var t=e.animated?vt.a.shaking:void 0,n=e.strong?vt.a.strong:void 0;return Object(r.jsxs)("svg",{x:"0px",y:"0px",viewBox:"0 0 500 500",width:e.size,height:e.size,className:P()(vt.a.hand,n),children:[Object(r.jsx)("path",{className:t,d:"M438.827,186.347l-80.213-88.149c-15.872-15.872-41.728-15.893-57.749,0.128c-5.077,5.077-8.533,11.157-10.325,17.643 c-15.957-12.224-38.976-11.008-53.675,3.691c-5.056,5.077-8.512,11.157-10.347,17.621c-15.957-12.181-38.976-10.987-53.653,3.712 c-4.971,4.971-8.384,10.901-10.24,17.216l-37.803-37.803c-15.872-15.872-41.728-15.893-57.749,0.128 c-15.893,15.872-15.893,41.728,0,57.621l145.237,145.237l-86.144,13.525c-23.275,3.328-40.832,23.552-40.832,47.083 c0,17.643,14.357,32,32,32h201.152c31.339,0,60.8-12.203,82.965-34.368l33.557-33.557c22.144-22.123,34.325-51.563,34.325-82.859 C469.333,235.989,458.496,207.979,438.827,186.347z M419.925,332.992l-33.557,33.557c-18.133,18.133-42.24,28.117-67.883,28.117 H117.333c-5.888,0-10.667-4.779-10.667-10.667c0-12.971,9.685-24.128,22.677-25.984l106.987-16.811 c3.968-0.619,7.232-3.413,8.491-7.232c1.237-3.797,0.235-8-2.603-10.837L82.155,163.072c-7.573-7.573-7.573-19.904,0.107-27.605 c3.797-3.776,8.768-5.675,13.739-5.675c4.971,0,9.941,1.899,13.739,5.696l106.731,106.731c4.16,4.16,10.923,4.16,15.083,0 c2.069-2.091,3.115-4.821,3.115-7.552s-1.045-5.461-3.136-7.552l-43.584-43.584c-7.573-7.573-7.573-19.883,0.128-27.584 c7.552-7.552,19.904-7.552,27.456,0l43.605,43.605c4.16,4.16,10.923,4.16,15.083,0c2.069-2.091,3.115-4.821,3.115-7.552 c0-2.731-1.045-5.461-3.136-7.552l-22.251-22.251c-7.573-7.573-7.573-19.883,0.128-27.584c7.552-7.552,19.904-7.552,27.456,0 l22.357,22.357c0.043,0.021,0.021,0.021,0.021,0.021l0.021,0.021c0.021,0.021,0.021,0.021,0.021,0.021 c0.021,0.021,0.021,0.021,0.021,0.021h0.021c0.021,0,0.021,0.021,0.021,0.021c4.181,3.968,10.795,3.883,14.869-0.213 c4.16-4.16,4.16-10.923,0-15.083l-0.917-0.917c-3.669-3.669-5.696-8.555-5.696-13.739s2.005-10.048,5.803-13.845 c7.595-7.552,19.883-7.531,27.115-0.363l79.872,87.787C439.125,218.389,448,241.301,448,265.216 C448,290.816,438.037,314.88,419.925,332.992z"}),Object(r.jsx)("path",{className:vt.a.wave,d:"M183.381,109.931C167.851,75.563,133.547,53.333,96,53.333c-52.928,0-96,43.072-96,96 c0,37.547,22.229,71.851,56.597,87.403c1.429,0.64,2.923,0.939,4.395,0.939c4.053,0,7.936-2.347,9.728-6.272 c2.411-5.376,0.021-11.691-5.333-14.123c-26.752-12.096-44.053-38.763-44.053-67.947c0-41.173,33.493-74.667,74.667-74.667 c29.184,0,55.851,17.301,67.947,44.053c2.411,5.376,8.747,7.787,14.101,5.333C183.424,121.621,185.813,115.307,183.381,109.931z"})]})},kt=function(){var e=yt(),t=Object(j.g)(),n=Object(j.h)(),c=g().createErrorNotification,a=Object(i.useState)(!1),s=Object(u.a)(a,2)[1],o=ht(n.search),l=function(){t.push(Ee)},d=Object(i.useCallback)(Object(ee.a)(Z.a.mark((function e(){var n,r,a,i,u;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,s(!0),e.next=6,ut(o);case 6:for(a in n=e.sent,r=[],n.registerRequests)i=n.registerRequests[a],r.push({appId:n.appId,challenge:i.challenge,version:i.version});return e.next=11,gt.a.register(r,[],60);case 11:return u=e.sent,e.next=14,dt(u);case 14:s(!1),t.push(Ee),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0),c("Failed to register your security key. The identity verification process might have timed out.");case 22:case"end":return e.stop()}}),e,null,[[2,18]])}))),[o,c,t]);return Object(i.useEffect)((function(){d()}),[d]),Object(r.jsxs)(Ce,{title:"Touch Security Key",children:[Object(r.jsx)("div",{className:e.icon,children:Object(r.jsx)(wt,{size:64,animated:!0})}),Object(r.jsx)(ce.a,{className:e.instruction,children:"Touch the token on your security key"}),Object(r.jsx)(oe.a,{color:"primary",onClick:l,children:"Retry"}),Object(r.jsx)(oe.a,{color:"primary",onClick:l,children:"Cancel"})]})},yt=Object(k.a)((function(e){return{icon:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},instruction:{paddingBottom:e.spacing(4)}}})),Ct=n(227),St=n(248),Tt=n(234),Nt=n(235),Et=n(236),It=n(229),Rt=n(230),At=n(231),Ft=n(232),_t=n(233);function Pt(){return tt(Ne)}function Lt(e,t){var n=Object(i.useState)(void 0),r=Object(u.a)(n,2),c=r[0],a=r[1],s=Object(i.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],b=Object(i.useState)(void 0),p=Object(u.a)(b,2),j=p[0],h=p[1],f=Object(i.useCallback)(e,[e,t]);return[c,Object(i.useCallback)((function(){Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,f();case 4:t=e.sent,d(!1),a(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),h(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[d,h,f]),l,j]}function Mt(){return function(e){window.location.href=e}}var Bt=n(29),zt=n(117),Dt=n.n(zt),Ut=function(){var e=Object(Bt.a)();return Object(r.jsx)(Oe.a,{container:!0,alignItems:"center",justify:"center",style:{minHeight:"100vh"},children:Object(r.jsxs)(Oe.a,{item:!0,style:{textAlign:"center",display:"inline-block"},children:[Object(r.jsx)(Dt.a,{width:64,height:64,color:e.custom.loadingBar,type:"bars"}),Object(r.jsx)(ce.a,{children:"Loading..."})]})})};function Wt(e){switch(e){case"openid":return Object(r.jsx)(It.a,{});case"profile":return Object(r.jsx)(Rt.a,{});case"groups":return Object(r.jsx)(At.a,{});case"email":return Object(r.jsx)(Ft.a,{});default:return Object(r.jsx)(_t.a,{})}}var Ht,qt,Kt=Object(k.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),display:"block",justifyContent:"center"},scopesListContainer:{textAlign:"center"},scopesList:{display:"inline-block",backgroundColor:e.palette.background.paper,marginTop:e.spacing(2),marginBottom:e.spacing(2)},clientID:{fontWeight:"bold"},button:{marginLeft:e.spacing(),marginRight:e.spacing(),width:"100%"},bulletIcon:{display:"inline-block"},permissionsContainer:{border:"1px solid #dedede",margin:e.spacing(4)},listItem:{textAlign:"center",marginRight:e.spacing(2)}}})),Gt=function(e){var t=Kt(),n=Object(j.g)(),c=Mt(),a=g(),s=a.createErrorNotification,o=a.resetNotification,l=Lt(Pt,[]),d=Object(u.a)(l,4),b=d[0],p=d[1],h=d[3];Object(i.useEffect)((function(){h&&(n.replace("/"),console.error("Unable to display consent screen: ".concat(h.message)))}),[n,o,s,h]),Object(i.useEffect)((function(){p()}),[p]);var f=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n=b.client_id,Ze(Ne,{client_id:n,accept_or_reject:"accept"});case 4:if(!(t=e.sent).redirect_uri){e.next=9;break}c(t.redirect_uri),e.next=10;break;case 9:throw new Error("Unable to redirect the user");case 10:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n=b.client_id,Ze(Ne,{client_id:n,accept_or_reject:"reject"});case 4:if(!(t=e.sent).redirect_uri){e.next=9;break}c(t.redirect_uri),e.next=10;break;case 9:throw new Error("Unable to redirect the user");case 10:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(Yt,{ready:void 0!==b,children:Object(r.jsx)(Ce,{id:"consent-stage",title:"Permissions Request",showBrand:!0,children:Object(r.jsxs)(Oe.a,{container:!0,children:[Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsxs)("div",{style:{textAlign:"left"},children:["The application",Object(r.jsx)("b",{children:" ".concat(null===b||void 0===b?void 0:b.client_description," (").concat(null===b||void 0===b?void 0:b.client_id,") ")}),"is requesting the following permissions"]})}),Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)("div",{className:t.scopesListContainer,children:Object(r.jsx)(Ct.a,{className:t.scopesList,children:null===b||void 0===b?void 0:b.scopes.map((function(e){return Object(r.jsx)(St.a,{title:"Scope "+e.name,children:Object(r.jsxs)(Tt.a,{id:"scope-"+e.name,dense:!0,children:[Object(r.jsx)(Nt.a,{children:Wt(e.name)}),Object(r.jsx)(Et.a,{primary:e.description})]})})}))})})}),Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsxs)(Oe.a,{container:!0,spacing:1,children:[Object(r.jsx)(Oe.a,{item:!0,xs:6,children:Object(r.jsx)(oe.a,{id:"accept-button",className:t.button,disabled:!b,onClick:f,color:"primary",variant:"contained",children:"Accept"})}),Object(r.jsx)(Oe.a,{item:!0,xs:6,children:Object(r.jsx)(oe.a,{id:"deny-button",className:t.button,disabled:!b,onClick:O,color:"secondary",variant:"contained",children:"Deny"})})]})})]})})})};function Yt(e){return Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)("div",{className:e.ready?"hidden":"",children:Object(r.jsx)(Ut,{})}),e.ready?e.children:null]})}function $t(e){switch(e){case"u2f":return Ht.U2F;case"totp":return Ht.TOTP;case"mobile_push":return Ht.MobilePush}}function Vt(e){switch(e){case Ht.U2F:return"u2f";case Ht.TOTP:return"totp";case Ht.MobilePush:return"mobile_push"}}function Jt(){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(qe);case 2:return t=e.sent,e.abrupt("return",Object(m.a)(Object(m.a)({},t),{},{method:$t(t.method)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qt(e){return Xe(Ke,{method:Vt(e)})}function Zt(){return en.apply(this,arguments)}function en(){return(en=Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(Ge);case 2:return t=e.sent,e.abrupt("return",Object(m.a)(Object(m.a)({},t),{},{available_methods:new Set(t.available_methods.map($t))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tn(){var e=Object(j.h)(),t=jt.a.parse(e.search);return t&&"rd"in t?t.rd:void 0}function nn(){var e=Object(j.h)(),t=jt.a.parse(e.search);return t&&"rm"in t?t.rm:void 0}function rn(){return cn.apply(this,arguments)}function cn(){return(cn=Object(ee.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tt(He));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.TOTP=1]="TOTP",e[e.U2F=2]="U2F",e[e.MobilePush=3]="MobilePush"}(Ht||(Ht={})),function(e){e[e.Unauthenticated=0]="Unauthenticated",e[e.OneFactor=1]="OneFactor",e[e.TwoFactor=2]="TwoFactor"}(qt||(qt={}));var an=n(69),sn=function(){return Object(r.jsx)(ne.a,{icon:an.a,size:"4x",color:"green",className:"success-icon"})},on=function(){var e=un();return Object(r.jsxs)("div",{id:"authenticated-stage",children:[Object(r.jsx)("div",{className:e.iconContainer,children:Object(r.jsx)(sn,{})}),Object(r.jsx)(ce.a,{children:"Authenticated"})]})},un=Object(k.a)((function(e){return{iconContainer:{marginBottom:e.spacing(2),flex:"0 0 100%"}}})),ln=function(e){var t=dn(),n=Object(j.g)();return Object(r.jsx)(Ce,{id:"authenticated-stage",title:"Hi ".concat(e.name),showBrand:!0,children:Object(r.jsxs)(Oe.a,{container:!0,children:[Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(oe.a,{color:"secondary",onClick:function(){n.push(Y)},id:"logout-button",children:"Logout"})}),Object(r.jsx)(Oe.a,{item:!0,xs:12,className:t.mainContainer,children:Object(r.jsx)(on,{})})]})})},dn=Object(k.a)((function(e){return{mainContainer:{border:"1px solid #d6d6d6",borderRadius:"10px",padding:e.spacing(4),marginTop:e.spacing(2),marginBottom:e.spacing(2)}}})),bn=n(237),pn=n(245),jn=function(e){var t=hn();return Object(r.jsx)(se.a,Object(m.a)(Object(m.a)({},e),{},{InputLabelProps:{classes:{root:t.label}},inputProps:{autoCapitalize:e.autoCapitalize},children:e.children}))},hn=Object(k.a)((function(e){return{label:{backgroundColor:e.palette.background.default,paddingLeft:e.spacing(.1),paddingRight:e.spacing(.1)}}}));function fn(e,t,n,r,c){return On.apply(this,arguments)}function On(){return(On=Object(ee.a)(Z.a.mark((function e(t,n,r,c,a){var i,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={username:t,password:n,keepMeLoggedIn:r},c&&(i.targetURL=c),a&&(i.requestMethod=a),e.next=5,Xe(Ee,i);case 5:return s=e.sent,e.abrupt("return",s||{});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xn=function(e){var t=gn(),n=Object(j.g)(),c=tn(),a=nn(),s=Object(i.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],b=Object(i.useState)(""),p=Object(u.a)(b,2),h=p[0],f=p[1],O=Object(i.useState)(!1),x=Object(u.a)(O,2),m=x[0],v=x[1],w=Object(i.useState)(""),k=Object(u.a)(w,2),y=k[0],C=k[1],S=Object(i.useState)(!1),T=Object(u.a)(S,2),N=T[0],E=T[1],I=g().createErrorNotification,R=Object(i.useRef)(),A=Object(i.useRef)();Object(i.useEffect)((function(){var e=setTimeout((function(){return R.current.focus()}),10);return function(){return clearTimeout(e)}}),[R]);var F=e.disabled,_=function(){var t=Object(ee.a)(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==h&&""!==y){t.next=4;break}return""===h&&v(!0),""===y&&E(!0),t.abrupt("return");case 4:return e.onAuthenticationStart(),t.prev=5,t.next=8,fn(h,y,l,c,a);case 8:n=t.sent,e.onAuthenticationSuccess(n?n.redirect:void 0),t.next=19;break;case 12:t.prev=12,t.t0=t.catch(5),console.error(t.t0),I("Incorrect username or password."),e.onAuthenticationFailure(),C(""),A.current.focus();case 19:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(){return t.apply(this,arguments)}}();return Object(r.jsx)(Ce,{id:"first-factor-stage",title:"Sign in",showBrand:!0,children:Object(r.jsxs)(Oe.a,{container:!0,spacing:2,children:[Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(jn,{inputRef:R,id:"username-textfield",label:"Username",variant:"outlined",required:!0,value:h,error:m,disabled:F,fullWidth:!0,onChange:function(e){return f(e.target.value)},onFocus:function(){return v(!1)},autoCapitalize:"none",onKeyPress:function(e){"Enter"===e.key&&(h.length?h.length&&y.length?_():(v(!1),A.current.focus()):v(!0))}})}),Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(jn,{inputRef:A,id:"password-textfield",label:"Password",variant:"outlined",required:!0,fullWidth:!0,disabled:F,value:y,error:N,onChange:function(e){return C(e.target.value)},onFocus:function(){return E(!1)},type:"password",onKeyPress:function(e){"Enter"===e.key&&(h.length?y.length||A.current.focus():R.current.focus(),_(),e.preventDefault())}})}),e.rememberMe||e.resetPassword?Object(r.jsxs)(Oe.a,{item:!0,xs:12,className:e.rememberMe?P()(t.leftAlign,t.actionRow):P()(t.leftAlign,t.flexEnd,t.actionRow),children:[e.rememberMe?Object(r.jsx)(bn.a,{control:Object(r.jsx)(pn.a,{id:"remember-checkbox",disabled:F,checked:l,onChange:function(){d(!l)},onKeyPress:function(e){"Enter"===e.key&&(h.length?y.length||A.current.focus():R.current.focus(),_())},value:"rememberMe",color:"primary"}),className:t.rememberMe,label:"Remember me"}):null,e.resetPassword?Object(r.jsx)(ae.a,{id:"reset-password-button",component:"button",onClick:function(){n.push(G)},className:t.resetLink,children:"Reset password?"}):null]}):null,Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(oe.a,{id:"sign-in-button",variant:"contained",color:"primary",fullWidth:!0,disabled:F,onClick:_,children:"Sign in"})})]})})},gn=Object(k.a)((function(e){return{actionRow:{display:"flex",flexDirection:"row",marginTop:e.spacing(-1),marginBottom:e.spacing(-1)},resetLink:{cursor:"pointer",paddingTop:13.5,paddingBottom:13.5},rememberMe:{flexGrow:1},flexEnd:{justifyContent:"flex-end"},leftAlign:{textAlign:"left"},rightAlign:{textAlign:"right",verticalAlign:"bottom"}}})),mn=n(246),vn=n(238),wn=n(239);var kn=n(119),yn=n.n(kn),Cn=function(e){var t=function(e,t,n,r){var c=Object(i.useState)(""),a=Object(u.a)(c,2),s=a[0],o=a[1],l=Object(i.useState)(!0),d=Object(u.a)(l,2),b=d[0],p=d[1];return Object(i.useEffect)((function(){var c;return c=b?r&&r>0?setTimeout((function(){o(e),p(!1)}),r):setTimeout((function(){o(e),p(!1)}),0):""===s?setTimeout((function(){return o(e)}),n):setTimeout((function(){return o("")}),t),function(){return clearTimeout(c)}}),[s,e,t,n,r,b]),s}(e.animated?yn.a.wiggle:"",500,2500,500);return Object(r.jsxs)("svg",{x:"0px",y:"0px",viewBox:"0 0 60 60",width:e.width,height:e.height,className:t,children:[Object(r.jsxs)("g",{children:[Object(r.jsx)("path",{className:"case",d:"M42.595,0H17.405C14.977,0,13,1.977,13,4.405v51.189C13,58.023,14.977,60,17.405,60h25.189C45.023,60,47,58.023,47,55.595 V4.405C47,1.977,45.023,0,42.595,0z M15,8h30v38H15V8z M17.405,2h25.189C43.921,2,45,3.079,45,4.405V6H15V4.405 C15,3.079,16.079,2,17.405,2z M42.595,58H17.405C16.079,58,15,56.921,15,55.595V48h30v7.595C45,56.921,43.921,58,42.595,58z"}),Object(r.jsx)("path",{className:"button",d:"M30,49c-2.206,0-4,1.794-4,4s1.794,4,4,4s4-1.794,4-4S32.206,49,30,49z M30,55c-1.103,0-2-0.897-2-2s0.897-2,2-2 s2,0.897,2,2S31.103,55,30,55z"}),Object(r.jsx)("path",{className:"speaker",d:"M26,5h4c0.553,0,1-0.447,1-1s-0.447-1-1-1h-4c-0.553,0-1,0.447-1,1S25.447,5,26,5z"}),Object(r.jsx)("path",{className:"camera",d:"M33,5h1c0.553,0,1-0.447,1-1s-0.447-1-1-1h-1c-0.553,0-1,0.447-1,1S32.447,5,33,5z"})]}),Object(r.jsx)("path",{d:"M56.612,4.569c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414c3.736,3.736,3.736,9.815,0,13.552 c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293 C61.128,16.434,61.128,9.085,56.612,4.569z"}),Object(r.jsx)("path",{d:"M52.401,6.845c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414c1.237,1.237,1.918,2.885,1.918,4.639 s-0.681,3.401-1.918,4.638c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293 c1.615-1.614,2.504-3.764,2.504-6.052S54.017,8.459,52.401,6.845z"}),Object(r.jsx)("path",{d:"M4.802,5.983c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0c-4.516,4.516-4.516,11.864,0,16.38 c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414 C1.065,15.799,1.065,9.72,4.802,5.983z"}),Object(r.jsx)("path",{d:"M9.013,6.569c-0.391-0.391-1.023-0.391-1.414,0c-1.615,1.614-2.504,3.764-2.504,6.052s0.889,4.438,2.504,6.053 c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414 c-1.237-1.237-1.918-2.885-1.918-4.639S7.775,9.22,9.013,7.983C9.403,7.593,9.403,6.96,9.013,6.569z"})]})},Sn=function(e){var t=e.maxProgress?e.maxProgress:100,n=e.width?e.width:20,c=e.height?e.height:20,a=e.color?e.color:"black",i=e.backgroundColor?e.backgroundColor:"white";return Object(r.jsxs)("svg",{height:"".concat(n),width:"".concat(c),viewBox:"0 0 26 26",children:[Object(r.jsx)("circle",{r:"12",cx:"13",cy:"13",fill:"none",stroke:i,strokeWidth:"2"}),Object(r.jsx)("circle",{r:"9",cx:"13",cy:"13",fill:i,stroke:"transparent"}),Object(r.jsx)("circle",{r:"5",cx:"13",cy:"13",fill:"none",stroke:a,strokeWidth:"10",strokeDasharray:"".concat(e.progress," ").concat(t),transform:"rotate(-90) translate(-26)"})]})},Tn=function(e){var t=31.6,n=Object(i.useState)(0),c=Object(u.a)(n,2),a=c[0],s=c[1];return Object(i.useEffect)((function(){var n=(new Date).getTime()/1e3%e.period/e.period*t;s(n);var r=setInterval((function(){var n=(new Date).getTime()/1e3%e.period/e.period*t;s(n)}),100);return function(){return clearInterval(r)}}),[e]),Object(r.jsx)(Sn,{width:e.width,height:e.height,progress:a,maxProgress:t,backgroundColor:e.backgroundColor,color:e.color})},Nn=function(e){var t=En(),n=Object(Bt.a)(),c=Object(r.jsx)(Tn,{width:24,height:24,period:15,color:n.palette.primary.main,backgroundColor:"white"});return Object(r.jsxs)(mn.a,{open:e.open,className:t.root,onClose:e.onClose,children:[Object(r.jsx)(vn.a,{children:Object(r.jsxs)(Oe.a,{container:!0,justify:"center",spacing:1,id:"methods-dialog",children:[e.methods.has(Ht.TOTP)?Object(r.jsx)(In,{id:"one-time-password-option",method:"Time-based One-Time Password",icon:c,onClick:function(){return e.onClick(Ht.TOTP)}}):null,e.methods.has(Ht.U2F)&&e.u2fSupported?Object(r.jsx)(In,{id:"security-key-option",method:"Security Key - U2F",icon:Object(r.jsx)(wt,{size:32}),onClick:function(){return e.onClick(Ht.U2F)}}):null,e.methods.has(Ht.MobilePush)?Object(r.jsx)(In,{id:"push-notification-option",method:"Push Notification",icon:Object(r.jsx)(Cn,{width:32,height:32}),onClick:function(){return e.onClick(Ht.MobilePush)}}):null]})}),Object(r.jsx)(wn.a,{children:Object(r.jsx)(oe.a,{color:"primary",onClick:e.onClose,children:"Close"})})]})},En=Object(k.a)((function(e){return{root:{textAlign:"center"}}}));function In(e){var t=Object(k.a)((function(e){return{item:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),width:"100%"},icon:{display:"inline-block",fill:"white"},buttonRoot:{display:"block"}}}))();return Object(r.jsx)(Oe.a,{item:!0,xs:12,className:"method-option",id:e.id,children:Object(r.jsxs)(oe.a,{className:t.item,color:"primary",classes:{root:t.buttonRoot},variant:"contained",onClick:e.onClick,children:[Object(r.jsx)("div",{className:t.icon,children:e.icon}),Object(r.jsx)("div",{children:Object(r.jsx)(ce.a,{children:e.method})})]})})}function Rn(e,t){var n={token:"".concat(e)};return t&&(n.targetURL=t),Xe(Be,n)}var An,Fn=function(e){return Object(r.jsx)(ne.a,{icon:te.b,size:"4x",color:"#5858ff",className:"information-icon"})};!function(e){e[e.ALREADY_AUTHENTICATED=1]="ALREADY_AUTHENTICATED",e[e.NOT_REGISTERED=2]="NOT_REGISTERED",e[e.METHOD=3]="METHOD"}(An||(An={}));var _n=function(e){var t,n=Pn(),c=e.registered?"Lost your device?":"Not registered yet?",a="";switch(e.state){case An.ALREADY_AUTHENTICATED:t=Object(r.jsx)(on,{}),a="state-already-authenticated";break;case An.NOT_REGISTERED:t=Object(r.jsx)(Ln,{}),a="state-not-registered";break;case An.METHOD:t=Object(r.jsx)(Mn,{explanation:e.explanation,children:e.children}),a="state-method"}return Object(r.jsxs)("div",{id:e.id,children:[Object(r.jsx)(ce.a,{variant:"h6",children:e.title}),Object(r.jsx)("div",{className:P()(n.container,a),id:"2fa-container",children:Object(r.jsx)("div",{className:n.containerFlex,children:t})}),e.onRegisterClick?Object(r.jsx)(ae.a,{component:"button",id:"register-link",onClick:e.onRegisterClick,children:c}):null]})},Pn=Object(k.a)((function(e){return{container:{height:"200px"},containerFlex:{display:"flex",flexWrap:"wrap",height:"100%",width:"100%",alignItems:"center",alignContent:"center",justifyContent:"center"}}}));function Ln(){var e=Object(Bt.a)();return Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)("div",{style:{marginBottom:e.spacing(2),flex:"0 0 100%"},children:Object(r.jsx)(Fn,{})}),Object(r.jsx)(ce.a,{style:{color:"#5858ff"},children:"Register your first device by clicking on the link below"})]})}function Mn(e){var t=Object(Bt.a)();return Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)("div",{style:{marginBottom:t.spacing(2)},children:e.children}),Object(r.jsx)(ce.a,{children:e.explanation})]})}var Bn,zn=n(120),Dn=n.n(zn),Un=function(e){var t=Object(k.a)((function(e){return{root:{},iconContainer:{display:"flex",flexDirection:"column",alignItems:"center"},icon:{width:64,height:64},context:{display:"block"}}}))();return Object(r.jsxs)("div",{className:P()(e.className,t.root),children:[Object(r.jsx)("div",{className:t.iconContainer,children:Object(r.jsx)("div",{className:t.icon,children:e.icon})}),Object(r.jsx)("div",{className:t.context,children:e.context})]})},Wn=function(e){var t=Hn(),n=Object(r.jsx)("span",{className:t.otpInput,id:"otp-input",children:Object(r.jsx)(Dn.a,{shouldAutoFocus:!0,onChange:e.onChange,value:e.passcode,numInputs:6,isDisabled:e.state===Bn.InProgress||e.state===Bn.Success,isInputNum:!0,hasErrored:e.state===Bn.Failure,inputStyle:P()(t.otpDigitInput,e.state===Bn.Failure?t.inputError:"")})});return Object(r.jsx)(Un,{icon:Object(r.jsx)(qn,{state:e.state,period:e.period}),context:n})},Hn=Object(k.a)((function(e){return{timeProgress:{},register:{marginTop:e.spacing()},otpInput:{display:"inline-block",marginTop:e.spacing(2)},otpDigitInput:{boxSizing:"content-box",padding:e.spacing(),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),fontSize:"1rem",borderRadius:"5px",border:"1px solid rgba(0,0,0,0.3)"},inputError:{border:"1px solid rgba(255, 2, 2, 0.95)"}}}));function qn(e){return Object(r.jsxs)(i.Fragment,{children:[e.state!==Bn.Success?Object(r.jsx)(Tn,{backgroundColor:"#000",color:"#FFFFFF",width:64,height:64,period:e.period}):null,e.state===Bn.Success?Object(r.jsx)(sn,{}):null]})}!function(e){e[e.Idle=1]="Idle",e[e.InProgress=2]="InProgress",e[e.Success=3]="Success",e[e.Failure=4]="Failure"}(Bn||(Bn={}));var Kn,Gn=function(e){var t=Object(i.useState)(""),n=Object(u.a)(t,2),c=n[0],a=n[1],s=Object(i.useState)(e.authenticationLevel===qt.TwoFactor?Bn.Success:Bn.Idle),o=Object(u.a)(s,2),l=o[0],d=o[1],b=tn(),p=e.onSignInSuccess,j=e.onSignInError,h=Object(i.useCallback)(j,[]),f=Object(i.useCallback)(p,[]),O=Object(i.useCallback)(Object(ee.a)(Z.a.mark((function t(){var n,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.authenticationLevel!==qt.TwoFactor){t.next=2;break}return t.abrupt("return");case 2:if(n="".concat(c),c&&6===n.length){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,d(Bn.InProgress),t.next=9,Rn(n,b);case 9:r=t.sent,d(Bn.Success),f(r?r.redirect:void 0),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(5),console.error(t.t0),h(new Error("The one-time password might be wrong")),d(Bn.Failure);case 19:a("");case 20:case"end":return t.stop()}}),t,null,[[5,14]])}))),[c,h,f,b,e.authenticationLevel]);Object(i.useEffect)((function(){e.authenticationLevel>=qt.TwoFactor&&d(Bn.Success)}),[e.authenticationLevel,d]),Object(i.useEffect)((function(){O()}),[O]);var x=An.METHOD;return e.authenticationLevel===qt.TwoFactor?x=An.ALREADY_AUTHENTICATED:e.registered||(x=An.NOT_REGISTERED),Object(r.jsx)(_n,{id:e.id,title:"One-Time Password",explanation:"Enter one-time password",registered:e.registered,state:x,onRegisterClick:e.onRegisterClick,children:Object(r.jsx)(Wn,{passcode:c,onChange:a,state:l,period:e.totp_period})})},Yn=function(e){return Object(r.jsx)(ne.a,{icon:an.b,size:"4x",color:"red",className:"failure-icon"})};function $n(){var e=Object(i.useRef)(!1);return Object(i.useEffect)((function(){return e.current=!0,function(){e.current=!1}})),e}function Vn(e){var t={};return e&&(t.targetURL=e),Xe(Me,t)}!function(e){e[e.SignInInProgress=1]="SignInInProgress",e[e.Success=2]="Success",e[e.Failure=3]="Failure"}(Kn||(Kn={}));var Jn,Xn=function(e){var t,n=Qn(),c=Object(i.useState)(Kn.SignInInProgress),a=Object(u.a)(c,2),s=a[0],o=a[1],l=tn(),d=$n(),b=e.onSignInSuccess,p=e.onSignInError,j=Object(i.useCallback)(p,[]),h=Object(i.useCallback)(b,[]),f=Object(i.useCallback)(Object(ee.a)(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.authenticationLevel!==qt.TwoFactor){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,o(Kn.SignInInProgress),t.next=6,Vn(l);case 6:if(n=t.sent,d.current){t.next=9;break}return t.abrupt("return");case 9:o(Kn.Success),setTimeout((function(){d.current&&h(n?n.redirect:void 0)}),1500),t.next=20;break;case 13:if(t.prev=13,t.t0=t.catch(2),d.current){t.next=17;break}return t.abrupt("return");case 17:console.error(t.t0),j(new Error("There was an issue completing sign in process")),o(Kn.Failure);case 20:case"end":return t.stop()}}),t,null,[[2,13]])}))),[j,h,o,l,d,e.authenticationLevel]);switch(Object(i.useEffect)((function(){f()}),[f]),Object(i.useEffect)((function(){e.authenticationLevel>=qt.TwoFactor&&o(Kn.Success)}),[e.authenticationLevel,o]),s){case Kn.SignInInProgress:t=Object(r.jsx)(Cn,{width:64,height:64,animated:!0});break;case Kn.Success:t=Object(r.jsx)(sn,{});break;case Kn.Failure:t=Object(r.jsx)(Yn,{})}var O=An.METHOD;return e.authenticationLevel===qt.TwoFactor&&(O=An.ALREADY_AUTHENTICATED),Object(r.jsxs)(_n,{id:e.id,title:"Push Notification",explanation:"A notification has been sent to your smartphone",registered:!0,state:O,children:[Object(r.jsx)("div",{className:n.icon,children:t}),Object(r.jsx)("div",{className:s!==Kn.Failure?"hidden":"",children:Object(r.jsx)(oe.a,{color:"secondary",onClick:f,children:"Retry"})})]})},Qn=Object(k.a)((function(e){return{icon:{width:"64px",height:"64px",display:"inline-block"}}})),Zn=n(240),er=function(e){var t=Object(k.a)((function(t){return{progressRoot:{height:e.height?e.height:t.spacing()},transition:{transition:"transform .2s linear"}}}))();return Object(r.jsx)(Zn.a,{style:e.style,variant:"determinate",classes:{root:t.progressRoot,bar1Determinate:t.transition},value:e.value,className:e.className})};function tr(){return nr.apply(this,arguments)}function nr(){return(nr=Object(ee.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ze(Pe));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e,t){var n={signResponse:e};return t&&(n.targetURL=t),Xe(Le,n)}!function(e){e[e.WaitTouch=1]="WaitTouch",e[e.SigninInProgress=2]="SigninInProgress",e[e.Failure=3]="Failure"}(Jn||(Jn={}));var cr=function(e){var t=Object(i.useState)(Jn.WaitTouch),n=Object(u.a)(t,2),c=n[0],a=n[1],s=ar(),o=tn(),l=$n(),d=function(e){var t=Object(i.useState)(void 0),n=Object(u.a)(t,2),r=n[0],c=n[1],a=Object(i.useState)(0),s=Object(u.a)(a,2),o=s[0],l=s[1],d=Object(i.useCallback)((function(){l(0),c(new Date)}),[c,l]),b=Object(i.useCallback)((function(){l(0),c(void 0)}),[]);return Object(i.useEffect)((function(){if(r){var t=setInterval((function(){var t=(r?(new Date).getTime()-r.getTime():0)/e*100;t>=100&&(t=100,c(void 0)),l(t)}),100);return function(){return clearInterval(t)}}}),[r,l,c,e]),[o,d,b]}(29500),b=Object(u.a)(d,2),p=b[0],j=b[1],h=e.onSignInSuccess,f=e.onSignInError,O=Object(i.useCallback)(f,[]),x=Object(i.useCallback)(h,[]),g=Object(i.useCallback)(Object(ee.a)(Z.a.mark((function t(){var n,r,c,i,s,u;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.registered&&!(e.authenticationLevel>=qt.TwoFactor)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,j(),a(Jn.WaitTouch),t.next=7,tr();case 7:for(c in n=t.sent,r=[],n.registeredKeys)i=n.registeredKeys[c],r.push({appId:n.appId,challenge:n.challenge,keyHandle:i.keyHandle,version:i.version});return t.next=12,gt.a.sign(r,30);case 12:if(s=t.sent,l.current){t.next=15;break}return t.abrupt("return");case 15:return a(Jn.SigninInProgress),t.next=18,rr(s,o);case 18:u=t.sent,x(u?u.redirect:void 0),t.next=29;break;case 22:if(t.prev=22,t.t0=t.catch(2),l.current){t.next=26;break}return t.abrupt("return");case 26:console.error(t.t0),O(new Error("Failed to initiate security key sign in process")),a(Jn.Failure);case 29:case"end":return t.stop()}}),t,null,[[2,22]])}))),[x,O,o,l,j,e.authenticationLevel,e.registered]);Object(i.useEffect)((function(){g()}),[g]);var m=An.METHOD;return e.authenticationLevel===qt.TwoFactor?m=An.ALREADY_AUTHENTICATED:e.registered||(m=An.NOT_REGISTERED),Object(r.jsx)(_n,{id:e.id,title:"Security Key",explanation:"Touch the token of your security key",registered:e.registered,state:m,onRegisterClick:e.onRegisterClick,children:Object(r.jsx)("div",{className:s.icon,children:Object(r.jsx)(ir,{state:c,timer:p,onRetryClick:g})})})},ar=Object(k.a)((function(e){return{icon:{display:"inline-block"}}}));function ir(e){var t=e.state,n=Object(Bt.a)(),c={marginTop:n.spacing()},a=Object(r.jsx)(Un,{icon:Object(r.jsx)(wt,{size:64,animated:!0,strong:!0}),context:Object(r.jsx)(er,{value:e.timer,style:c,height:n.spacing(2)}),className:t===Jn.WaitTouch?void 0:"hidden"}),s=Object(r.jsx)(Un,{icon:Object(r.jsx)(Yn,{}),context:Object(r.jsx)(oe.a,{color:"secondary",onClick:e.onRetryClick,children:"Retry"}),className:t===Jn.Failure?void 0:"hidden"});return Object(r.jsxs)(i.Fragment,{children:[a,s]})}var sr=function(e){var t=or(),n=Object(j.g)(),c=Object(i.useState)(!1),a=Object(u.a)(c,2),s=a[0],o=a[1],l=g(),d=l.createInfoNotification,b=l.createErrorNotification,p=Object(i.useState)(!1),h=Object(u.a)(p,2),f=h[0],O=h[1],x=Object(i.useState)(!1),m=Object(u.a)(x,2),v=m[0],w=m[1];Object(i.useEffect)((function(){gt.a.ensureSupport().then((function(){return w(!0)}),(function(){return console.error("U2F not supported")}))}),[w]);var k=function(e){return Object(ee.a)(Z.a.mark((function t(){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=2;break}return t.abrupt("return");case 2:return O(!0),t.prev=3,t.next=6,e();case 6:d("An email has been sent to your address to complete the process."),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.error(t.t0),b("There was a problem initiating the registration process");case 13:O(!1);case 14:case"end":return t.stop()}}),t,null,[[3,9]])})))},y=function(){var t=Object(ee.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Qt(n);case 3:o(!1),e.onMethodChanged(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),b("There was an issue updating preferred second factor method");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)(Ce,{id:"second-factor-stage",title:"Hi ".concat(e.userInfo.display_name),showBrand:!0,children:[Object(r.jsx)(Nn,{open:s,methods:e.configuration.available_methods,u2fSupported:v,onClose:function(){return o(!1)},onClick:y}),Object(r.jsxs)(Oe.a,{container:!0,children:[Object(r.jsxs)(Oe.a,{item:!0,xs:12,children:[Object(r.jsx)(oe.a,{color:"secondary",onClick:function(){n.push(Y)},id:"logout-button",children:"Logout"})," | ",Object(r.jsx)(oe.a,{color:"secondary",onClick:function(){o(!0)},id:"methods-button",children:"Methods"})]}),Object(r.jsx)(Oe.a,{item:!0,xs:12,className:t.methodContainer,children:Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:q,exact:!0,children:Object(r.jsx)(Gn,{id:"one-time-password-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_totp,totp_period:e.configuration.totp_period,onRegisterClick:k(rt),onSignInError:function(e){return b(e.message)},onSignInSuccess:e.onAuthenticationSuccess})}),Object(r.jsx)(j.b,{path:H,exact:!0,children:Object(r.jsx)(cr,{id:"security-key-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_u2f,onRegisterClick:k(st),onSignInError:function(e){return b(e.message)},onSignInSuccess:e.onAuthenticationSuccess})}),Object(r.jsx)(j.b,{path:K,exact:!0,children:Object(r.jsx)(Xn,{id:"push-notification-method",authenticationLevel:e.authenticationLevel,onSignInError:function(e){return b(e.message)},onSignInSuccess:e.onAuthenticationSuccess})}),Object(r.jsx)(j.b,{path:W,children:Object(r.jsx)(j.a,{to:q})})]})})]})]})},or=Object(k.a)((function(e){return{methodContainer:{border:"1px solid #d6d6d6",borderRadius:"10px",padding:e.spacing(4),marginTop:e.spacing(2),marginBottom:e.spacing(2)}}})),ur=function(e){var t=Object(j.g)(),n=Object(j.h)(),c=tn(),a=nn(),s=g().createErrorNotification,o=Object(i.useState)(!0),l=Object(u.a)(o,2),d=l[0],b=l[1],p=Mt(),h=Lt(rn,[]),f=Object(u.a)(h,4),O=f[0],x=f[1],m=f[3],v=Lt(Jt,[]),w=Object(u.a)(v,4),k=w[0],y=w[1],C=w[3],S=Lt(Zt,[]),T=Object(u.a)(S,4),N=T[0],E=T[1],I=T[3],R=Object(i.useCallback)((function(e){return t.push(e)}),[t]);Object(i.useEffect)((function(){x()}),[x]),Object(i.useEffect)((function(){O&&O.authentication_level>=qt.OneFactor&&(y(),E())}),[O,y,E]),Object(i.useEffect)((function(){O&&O.authentication_level>qt.Unauthenticated&&b(!0)}),[O,b]),Object(i.useEffect)((function(){m&&s("There was an issue fetching the current user state")}),[m,s]),Object(i.useEffect)((function(){I&&s("There was an issue retrieving global configuration")}),[I,s]),Object(i.useEffect)((function(){C&&s("There was an issue retrieving user preferences")}),[C,s]),Object(i.useEffect)((function(){if(O){var e=c?"?rd=".concat(encodeURIComponent(c)).concat(a?"&rm=".concat(a):""):"";O.authentication_level===qt.Unauthenticated?(b(!1),R("".concat(D).concat(e))):O.authentication_level>=qt.OneFactor&&k&&N&&(N.second_factor_enabled?k.method===Ht.U2F?R("".concat(H).concat(e)):k.method===Ht.MobilePush?R("".concat(K).concat(e)):R("".concat(q).concat(e)):R(U))}}),[O,c,a,R,k,b,N]);var A=function(){var e=Object(ee.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?p(t):x();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=void 0!==O&&O.authentication_level===qt.Unauthenticated&&n.pathname===D;return Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:D,exact:!0,children:Object(r.jsx)(lr,{ready:F,children:Object(r.jsx)(xn,{disabled:d,rememberMe:e.rememberMe,resetPassword:e.resetPassword,onAuthenticationStart:function(){return b(!0)},onAuthenticationFailure:function(){return b(!1)},onAuthenticationSuccess:A})})}),Object(r.jsx)(j.b,{path:W,children:O&&k&&N?Object(r.jsx)(sr,{authenticationLevel:O.authentication_level,userInfo:k,configuration:N,onMethodChanged:function(){return y()},onAuthenticationSuccess:A}):null}),Object(r.jsx)(j.b,{path:U,exact:!0,children:k?Object(r.jsx)(ln,{name:k.display_name}):null}),Object(r.jsx)(j.b,{path:"/",children:Object(r.jsx)(j.a,{to:D})})]})};function lr(e){return Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)("div",{className:e.ready?"hidden":"",children:Object(r.jsx)(Ut,{})}),e.ready?e.children:null]})}function dr(e){return br.apply(this,arguments)}function br(){return(br=Object(ee.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t&&(n.targetURL=t),e.abrupt("return",Xe(We,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pr=function(e){var t=$n(),n=jr(),c=g().createErrorNotification,a=tn(),s=Mt(),o=Object(i.useState)(!1),l=Object(u.a)(o,2),d=l[0],b=l[1],p=Object(i.useState)(!1),h=Object(u.a)(p,2),f=h[0],O=h[1],x=Object(i.useCallback)(Object(ee.a)(Z.a.mark((function e(){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dr(a);case 3:void 0!==(n=e.sent)&&n.safeTargetURL&&O(!0),setTimeout((function(){t&&b(!0)}),2e3),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),c("There was an issue signing out");case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[c,a,O,b,t]);if(Object(i.useEffect)((function(){x()}),[x]),d){if(!a||!f)return Object(r.jsx)(j.a,{to:D});s(a)}return Object(r.jsx)(Ce,{title:"Sign out",children:Object(r.jsx)(ce.a,{className:n.typo,children:"You're being signed out and redirected..."})})},jr=Object(k.a)((function(e){return{typo:{padding:e.spacing()}}}));function hr(e){return fr.apply(this,arguments)}function fr(){return(fr=Object(ee.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(ze,{username:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Or(e){return xr.apply(this,arguments)}function xr(){return(xr=Object(ee.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(De,{token:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gr(e){return mr.apply(this,arguments)}function mr(){return(mr=Object(ee.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(Ue,{password:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vr=function(){var e=wr(),t=Object(i.useState)(""),n=Object(u.a)(t,2),c=n[0],a=n[1],s=Object(i.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],b=g(),p=b.createInfoNotification,h=b.createErrorNotification,f=Object(j.g)(),O=function(){var e=Object(ee.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==c){e.next=3;break}return d(!0),e.abrupt("return");case 3:return e.prev=3,e.next=6,hr(c);case 6:p("An email has been sent to your address to complete the process."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),h("There was an issue initiating the password reset process.");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(Ce,{title:"Reset password",id:"reset-password-step1-stage",children:Object(r.jsxs)(Oe.a,{container:!0,className:e.root,spacing:2,children:[Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(jn,{id:"username-textfield",label:"Username",variant:"outlined",fullWidth:!0,error:l,value:c,onChange:function(e){return a(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(O(),e.preventDefault())}})}),Object(r.jsx)(Oe.a,{item:!0,xs:6,children:Object(r.jsx)(oe.a,{id:"reset-button",variant:"contained",color:"primary",fullWidth:!0,onClick:function(){O()},children:"Reset"})}),Object(r.jsx)(Oe.a,{item:!0,xs:6,children:Object(r.jsx)(oe.a,{id:"cancel-button",variant:"contained",color:"primary",fullWidth:!0,onClick:function(){f.push(D)},children:"Cancel"})})]})})},wr=Object(k.a)((function(e){return{root:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}})),kr=function(){var e=yr(),t=Object(j.h)(),n=Object(i.useState)(!0),c=Object(u.a)(n,2),a=c[0],s=c[1],o=Object(i.useState)(""),l=Object(u.a)(o,2),d=l[0],b=l[1],p=Object(i.useState)(""),h=Object(u.a)(p,2),f=h[0],O=h[1],x=Object(i.useState)(!1),m=Object(u.a)(x,2),v=m[0],w=m[1],k=Object(i.useState)(!1),y=Object(u.a)(k,2),C=y[0],S=y[1],T=g(),N=T.createSuccessNotification,E=T.createErrorNotification,I=Object(j.g)(),R=ht(t.search),A=Object(i.useCallback)(Object(ee.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=4;break}return s(!0),E("No verification token provided"),e.abrupt("return");case 4:return e.prev=4,s(!0),e.next=8,Or(R);case 8:s(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0),E("There was an issue completing the process. The verification token might have expired."),s(!0);case 16:case"end":return e.stop()}}),e,null,[[4,11]])}))),[R,E]);Object(i.useEffect)((function(){A()}),[A]);var F=function(){var e=Object(ee.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==d&&""!==f){e.next=4;break}return""===d&&w(!0),""===f&&S(!0),e.abrupt("return");case 4:if(d===f){e.next=9;break}return w(!0),S(!0),E("Passwords do not match."),e.abrupt("return");case 9:return e.prev=9,e.next=12,gr(d);case 12:N("Password has been reset."),setTimeout((function(){return I.push(D)}),1500),s(!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),console.error(e.t0),e.t0.message.includes("0000052D.")?E("Your supplied password does not meet the password policy requirements."):E("There was an issue resetting the password.");case 21:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(Ce,{title:"Enter new password",id:"reset-password-step2-stage",children:Object(r.jsxs)(Oe.a,{container:!0,className:e.root,spacing:2,children:[Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(jn,{id:"password1-textfield",label:"New password",variant:"outlined",type:"password",value:d,disabled:a,onChange:function(e){return b(e.target.value)},error:v,className:P()(e.fullWidth)})}),Object(r.jsx)(Oe.a,{item:!0,xs:12,children:Object(r.jsx)(jn,{id:"password2-textfield",label:"Repeat new password",variant:"outlined",type:"password",disabled:a,value:f,onChange:function(e){return O(e.target.value)},error:C,onKeyPress:function(e){"Enter"===e.key&&(F(),e.preventDefault())},className:P()(e.fullWidth)})}),Object(r.jsx)(Oe.a,{item:!0,xs:6,children:Object(r.jsx)(oe.a,{id:"reset-button",variant:"contained",color:"primary",name:"password1",disabled:a,onClick:function(){return F()},className:e.fullWidth,children:"Reset"})}),Object(r.jsx)(Oe.a,{item:!0,xs:6,children:Object(r.jsx)(oe.a,{id:"cancel-button",variant:"contained",color:"primary",name:"password2",onClick:function(){return I.push(D)},className:e.fullWidth,children:"Cancel"})})]})})},yr=Object(k.a)((function(e){return{root:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},fullWidth:{width:"100%"}}}));n(181);function Cr(){switch(c("theme")){case"dark":return J;case"grey":return X;default:return V}}l.a.autoAddCss=!1;var Sr=function(){var e=Object(i.useState)(null),t=Object(u.a)(e,2),n=t[0],s=t[1];return Object(r.jsxs)(d.a,{theme:Cr(),children:[Object(r.jsx)(b.a,{}),Object(r.jsx)(x.Provider,{value:{notification:n,setNotification:s},children:Object(r.jsxs)(p.a,{basename:a(),children:[Object(r.jsx)(z,{onClose:function(){return s(null)}}),Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:G,exact:!0,children:Object(r.jsx)(vr,{})}),Object(r.jsx)(j.b,{path:"/reset-password/step2",exact:!0,children:Object(r.jsx)(kr,{})}),Object(r.jsx)(j.b,{path:"/security-key/register",exact:!0,children:Object(r.jsx)(kt,{})}),Object(r.jsx)(j.b,{path:"/one-time-password/register",exact:!0,children:Object(r.jsx)(ft,{})}),Object(r.jsx)(j.b,{path:Y,exact:!0,children:Object(r.jsx)(pr,{})}),Object(r.jsx)(j.b,{path:"/consent",exact:!0,children:Object(r.jsx)(Gt,{})}),Object(r.jsx)(j.b,{path:D,children:Object(r.jsx)(ur,{rememberMe:"true"===c("rememberme"),resetPassword:"true"===c("resetpassword")})}),Object(r.jsx)(j.b,{path:"/",children:Object(r.jsx)(j.a,{to:D})})]})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(r.jsx)(Sr,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},57:function(e,t,n){e.exports={hand:"FingerTouchIcon_hand__fZM01",strong:"FingerTouchIcon_strong__XLkjn",shaking:"FingerTouchIcon_shaking__2J7jA"}}},[[182,1,2]]]);
//# sourceMappingURL=main.6776a0e9.chunk.js.map